<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>LinkBotLabs Affiliate Shop</title>
<style>
  body { font-family: 'Segoe UI', sans-serif; background:#0b0c1a; color:#fff; margin:0; padding:20px; }
  h1 { text-align:center; color:cyan; margin-bottom:20px; }
  .search-section { display:flex; justify-content:center; gap:10px; margin-bottom:20px; max-width:600px; margin:auto; }
  .search-section input { flex:1; padding:12px; border-radius:6px; border:1px solid #444; background:#111; color:#fff; font-size:16px; }
  .search-section button { padding:12px 18px; border:none; border-radius:6px; background:cyan; color:#000; font-weight:bold; cursor:pointer; }
  .products { display:flex; flex-wrap:wrap; gap:15px; justify-content:center; }
  .product-card { background:rgba(26,26,46,0.85); border:1px solid #3a3a5d; border-radius:10px; padding:16px; width:220px; text-align:center; }
  .product-card img { width:100%; border-radius:6px; margin-bottom:8px; }
  .product-title { font-size:18px; font-weight:bold; margin:10px 0; }
  .product-desc { font-size:14px; color:#ccc; margin-bottom:12px; }
  .product-btn { padding:12px; background:black; border:2px solid cyan; border-radius:8px; color:white; font-weight:bold; cursor:pointer; width:90%; transition:0.2s; }
  .product-btn:hover { background:cyan; color:black; }
</style>
</head>
<body>

<h1>âœ¨ LinkBotLabs Shop âœ¨</h1>

<div class="search-section">
  <input type="text" id="searchInput" placeholder="ðŸ” Search products (e.g. smart watch)">
  <button id="searchBtn">Search</button>
</div>

<div class="products" id="products"></div>

<script>
const API_KEY = "AIzaSyB9YwW8EVXQJsVwSMbJrk-NU9B9ZrzzkGs"; // your API key
const CSE_ID = "f7e219616fe1d4629"; // your CSE ID
const AFFILIATE_TAG = "mychanneld-20"; // your affiliate tag

const productsDiv = document.getElementById("products");

async function searchProducts(query){
  productsDiv.innerHTML = "ðŸ”Ž Searchingâ€¦";
  try{
    const res = await fetch(`https://www.googleapis.com/customsearch/v1?key=${API_KEY}&cx=${CSE_ID}&q=${encodeURIComponent(query)}&num=10`);
    const data = await res.json();
    
    if(!data.items || data.items.length===0){ 
      productsDiv.innerHTML = "No results found."; 
      return; 
    }

    productsDiv.innerHTML = "";
    data.items.forEach(item=>{
      let link = item.link;
      if(AFFILIATE_TAG) link += (link.includes("?") ? "&" : "?") + "tag=" + AFFILIATE_TAG;

      const img = item.pagemap?.cse_image?.[0]?.src || '';
      const card = document.createElement("div");
      card.className = "product-card";
      card.innerHTML = `
        ${img ? `<img src="${img}">` : ''}
        <h3 class="product-title">${item.title}</h3>
        <p class="product-desc">${item.snippet}</p>
        <button class="product-btn">ðŸ›’ Buy Now</button>
      `;
      card.querySelector("button").onclick = ()=>window.open(link,"_blank");
      productsDiv.appendChild(card);
    });
  }catch(e){
    productsDiv.innerHTML="Error: "+e.message;
  }
}

document.getElementById("searchBtn").addEventListener("click", ()=>{
  const query = document.getElementById("searchInput").value.trim();
  if(query) searchProducts(query);
});
</script>

</body>
</html>
